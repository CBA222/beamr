{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/frontend/youtube-clone-frontend/src/Watch.js\";\nimport React, { Component } from \"react\";\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport './watch.scss';\nimport { abbreviate_number } from './helpers';\nimport VideoPreview from \"./VideoPreview\";\n\nclass Watch extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchMoreData = () => {\n      fetch(\"/upnext_videos?start=0&num=5\", {}).then(response => response.json()).then(data => {\n        this.setState({\n          items: this.state.items.concat(data[\"videos\"])\n        });\n      });\n    };\n\n    this.state = {\n      'manifest_url': \"\",\n      'title': \"\",\n      'channel': \"\",\n      \"channel_url\": \"\",\n      \"channel_icon_url\": \"\",\n      \"view_count\": \"\",\n      \"upload_date\": \"\",\n      \"subscriber_count\": \"\",\n      \"description\": \"\",\n      items: [],\n      hasMore: false\n    };\n    this.new_page(props);\n  }\n\n  componentDidMount() {\n    var submit_comment = document.getElementById(\"submit-comment\");\n\n    document.getElementById(\"comment-box\").oninput = function (e) {\n      console.log(e.target.value);\n\n      if (e.target.value.length > 0) {\n        submit_comment.disabled = false;\n      } else {\n        submit_comment.disabled = true;\n      }\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.location.search != nextProps.location.search) {\n      this.new_page(nextProps);\n    }\n  }\n\n  new_page(props) {\n    const urlParams = new URLSearchParams(props.location.search);\n    const id = urlParams.get('id');\n    this.setState({\n      items: []\n    });\n    fetch(\"/video?id=\" + id, {}).then(response => response.json()).then(data => {\n      console.log(data[\"manifest_url\"]);\n      this.setState({\n        \"manifest_url\": data[\"manifest_url\"] + \"?x-request=html\",\n        \"title\": data[\"title\"],\n        \"channel\": data[\"channel\"],\n        \"channel_url\": data[\"channel_url\"],\n        \"channel_icon_url\": data[\"channel_icon_url\"],\n        \"view_count\": data[\"view_count\"],\n        \"upload_date\": data[\"upload_date\"],\n        //\"subscriber_count\": abbreviate_number(data[\"subscriber_count\"]),\n        \"subscriber_count\": data[\"subscriber_count\"],\n        \"description\": data[\"description\"]\n      });\n      var video = document.getElementById(\"videoPlayer\");\n\n      try {\n        this.state.player.reset();\n      } catch (error) {}\n\n      this.state.player = window.dashjs.MediaPlayer().create(); //this.state.player.setAutoPlay(true);\n\n      this.state.player.initialize(video, data[\"manifest_url\"], true); //this.state.player.attachView(video); /* tell the player which videoElement it should use */\n      //this.state.player.attachSource(data[\"manifest_url\"]); /* provide the manifest source */\n    });\n    fetch(\"/upnext_videos?start=0&num=10\", {}).then(response => response.json()).then(data => {\n      this.setState({\n        items: this.state.items.concat(data[\"videos\"])\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"watch-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"video\", {\n      autoPlay: \"\",\n      id: \"videoPlayer\",\n      controls: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"under-video-area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"video-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"description-top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 25\n      }\n    }, this.state.title), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"views_date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }\n    }, this.state.view_count, \" views \\u2022 \", this.state.upload_date)), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"description-bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"icon-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"channel-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      class: \"channel-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 29\n      }\n    }, this.state.channel), /*#__PURE__*/React.createElement(\"p\", {\n      class: \"subscriber-count\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }, this.state.subscriber_count, \" subscribers\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"subscribe-button-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 29\n      }\n    }, \"SUBSCRIBE\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"description-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"pre\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 32\n      }\n    }, this.state.description))))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"comments-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"comment-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"comment-count\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, \"No Comments\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    }, \"Sort by:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 33\n      }\n    }, \"Top\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 33\n      }\n    }, \"New\")))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"comment-input-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"comment-box\",\n      name: \"comment\",\n      placeholder: \"Write a comment\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"submit-comment\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, \"COMMENT\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"comments-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"video-list-container\",\n      id: \"video-list-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n      dataLength: this.state.items.length,\n      next: this.fetchMoreData,\n      hasMore: true,\n      scrollableTarget: \"video-list-container\",\n      loader: /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 25\n        }\n      }, \"Loading...\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, this.state.items.map(val => /*#__PURE__*/React.createElement(RecommendedvideoPreview, {\n      title: val.title,\n      view_count: val.view_count,\n      upload_date: val.upload_date,\n      video_length: val.video_length,\n      static_url: val.static_url,\n      animated_url: val.animated_url,\n      channel: val.channel,\n      video_url: val.video_url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }))))));\n  }\n\n}\n\nfunction RecommendedvideoPreview(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    class: \"video-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"thumbnail-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(VideoPreview, {\n    video_length: props.video_length,\n    static_url: props.static_url,\n    animated_url: props.animated_url,\n    video_url: props.video_url,\n    channel: props.channel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 21\n    }\n  }, props.title), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"channel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  }, props.channel), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"views_date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 21\n    }\n  }, props.view_count, \" views \\u2022 \", props.upload_date)));\n}\n\nexport default Watch;","map":{"version":3,"sources":["/home/ubuntu/frontend/youtube-clone-frontend/src/Watch.js"],"names":["React","Component","InfiniteScroll","abbreviate_number","VideoPreview","Watch","constructor","props","fetchMoreData","fetch","then","response","json","data","setState","items","state","concat","hasMore","new_page","componentDidMount","submit_comment","document","getElementById","oninput","e","console","log","target","value","length","disabled","componentWillReceiveProps","nextProps","location","search","urlParams","URLSearchParams","id","get","video","player","reset","error","window","dashjs","MediaPlayer","create","initialize","render","title","view_count","upload_date","channel","subscriber_count","description","map","val","video_length","static_url","animated_url","video_url","RecommendedvideoPreview"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport './watch.scss'\nimport {abbreviate_number} from './helpers'\nimport VideoPreview from \"./VideoPreview\";\n\nclass Watch extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            'manifest_url': \"\",\n            'title': \"\",\n            'channel': \"\",\n            \"channel_url\": \"\",\n            \"channel_icon_url\": \"\",\n            \"view_count\": \"\",\n            \"upload_date\": \"\",\n            \"subscriber_count\": \"\",\n            \"description\": \"\",\n            items: [],\n            hasMore: false\n        }\n\n        this.new_page(props);\n        \n    }\n\n    componentDidMount() {\n        var submit_comment = document.getElementById(\"submit-comment\");\n        document.getElementById(\"comment-box\").oninput = function(e) {\n            console.log(e.target.value);\n            if (e.target.value.length > 0) {\n                submit_comment.disabled = false;\n            } else {\n                submit_comment.disabled = true;\n            }\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.props.location.search != nextProps.location.search) {\n            this.new_page(nextProps);\n        }\n    }\n\n    new_page(props) {\n        const urlParams = new URLSearchParams(props.location.search);\n        const id = urlParams.get('id');\n\n        this.setState({\n            items: []\n        })\n\n        fetch(\"/video?id=\"+id, {\n        })\n        .then(response => response.json())\n        .then(data => {\n            console.log(data[\"manifest_url\"])\n            this.setState({\n                \"manifest_url\": data[\"manifest_url\"]+\"?x-request=html\",\n                \"title\": data[\"title\"],\n                \"channel\": data[\"channel\"],\n                \"channel_url\": data[\"channel_url\"],\n                \"channel_icon_url\": data[\"channel_icon_url\"],\n                \"view_count\": data[\"view_count\"],\n                \"upload_date\": data[\"upload_date\"],\n                //\"subscriber_count\": abbreviate_number(data[\"subscriber_count\"]),\n                \"subscriber_count\": data[\"subscriber_count\"],\n                \"description\": data[\"description\"]\n            })\n\n            var video = document.getElementById(\"videoPlayer\")\n\n            try {\n                this.state.player.reset();\n            } catch (error) {\n                \n            }\n            this.state.player = window.dashjs.MediaPlayer().create();\n                \n            //this.state.player.setAutoPlay(true);\n            this.state.player.initialize(video, data[\"manifest_url\"], true);\n            //this.state.player.attachView(video); /* tell the player which videoElement it should use */\n            //this.state.player.attachSource(data[\"manifest_url\"]); /* provide the manifest source */\n\n        })\n\n        fetch(\"/upnext_videos?start=0&num=10\", {\n        })\n        .then(response => response.json())\n        .then(data => {\n            this.setState({\n                items: this.state.items.concat(data[\"videos\"])\n            })\n        })\n    }\n\n\n    fetchMoreData = () => {\n        fetch(\"/upnext_videos?start=0&num=5\", {\n        })\n        .then(response => response.json())\n        .then(data => {\n            this.setState({\n                items: this.state.items.concat(data[\"videos\"])\n            })\n        })\n      };\n\n    render() {\n        return <div class=\"watch-container\">\n        <div class=\"left\">\n            <video\n            autoPlay=\"\"\n            id=\"videoPlayer\"\n            controls></video>\n            <div class=\"under-video-area\">\n                <div class=\"video-description\">\n                    <div class=\"description-top\">\n                        <div class=\"title\">{this.state.title}</div>\n                        <div class=\"views_date\">{this.state.view_count} views • {this.state.upload_date}</div>\n                    </div>\n                    <div class=\"description-bottom\">\n                        <div class=\"icon-container\">\n                            <img src=\"#\"/>\n                        </div>\n                        <div class=\"channel-text\">\n                            <p class=\"channel-title\">{this.state.channel}</p>\n                            <p class=\"subscriber-count\">{this.state.subscriber_count} subscribers</p>\n                        </div>\n                        <div class=\"subscribe-button-container\">\n                            <button>SUBSCRIBE</button>\n                        </div>\n                        <div class=\"description-text\">\n                            <p><pre>{this.state.description}</pre></p>\n                        </div>\n                        \n                    </div>\n                </div>\n                <div class=\"comments-container\">\n                    <div class=\"comment-options\">\n                        <div class=\"comment-count\">No Comments</div>\n                        <div>\n                            Sort by:\n                        </div>\n                        <div>\n                            <select>\n                                <option>Top</option>\n                                <option>New</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"comment-input-container\">\n                        <input type=\"text\" id=\"comment-box\" name=\"comment\" placeholder=\"Write a comment\" required/>\n                        <button id=\"submit-comment\" disabled>COMMENT</button>\n                    </div>\n                    <div class=\"comments-list\">\n        \n                    </div>\n                </div>\n            </div>\n            \n        </div>\n        <div class=\"right\">\n            <div class=\"video-list-container\" id=\"video-list-container\">\n                <InfiniteScroll\n                dataLength={this.state.items.length}\n                next={this.fetchMoreData}\n                hasMore={true}\n                scrollableTarget=\"video-list-container\"\n                loader={<h4>Loading...</h4>}>\n                    {this.state.items.map((val) => (\n                        <RecommendedvideoPreview \n                            title={val.title} \n                            view_count={val.view_count} \n                            upload_date={val.upload_date}\n                            video_length={val.video_length}\n                            static_url={val.static_url}\n                            animated_url={val.animated_url}\n                            channel={val.channel}\n                            video_url={val.video_url}\n                        />\n                    ))}\n                </InfiniteScroll>\n            </div>\n        </div>\n    </div>\n    }\n}\n\nfunction RecommendedvideoPreview(props) {\n    return <div class=\"video-item\">\n                <div class=\"thumbnail-container\">\n                    <VideoPreview \n                        video_length={props.video_length}\n                        static_url={props.static_url}\n                        animated_url={props.animated_url}\n                        video_url={props.video_url}\n                        channel={props.channel}\n                    />\n                </div>\n\n                <div class=\"description\">\n                    <div class=\"title\">{props.title}</div>\n                    <div class=\"channel\">{props.channel}</div>\n                    <div class=\"views_date\">{props.view_count} views • {props.upload_date}</div>\n                </div>\n            </div>;\n}\n\nexport default Watch;\n\n"]},"metadata":{},"sourceType":"module"}